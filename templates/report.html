{% extends "base.html" %}
{% block title %}
    Expenditure Tracker - Report
{% endblock %}
{% block body %}
    <div class="container mt-4">
    

    <div class="table-responsive">
        <table class="table table-hover table-dark report-table">

            <thead>
            <tr>
                <th class="mb-4 text-center">
                Expenditure Report from {{ start_date.strftime('%Y-%m-%d') }} to {{ end_date.strftime('%Y-%m-%d') }}
                </th>
            </tr>
            <tr>
                <th>Date</th>
                <th>Item</th>
                <th>Amount</th>
            </tr>
            </thead>
            <tbody>
            {% for item in items %}
            <tr>
                <td>{{ item.date }}</td>
                <td>{{ item.itemname }}</td>
                <td>₹ {{ "%.2f"|format(item.amount) }}</td>
            </tr>
            {% endfor %}
            <tr>
                <td colspan="2" style="text-align: right;"><strong>Total</strong></td>
                <td><strong> ₹ {{ "%.2f"|format(items|map(attribute = 'amount')|sum) }} </strong></td>
            </tr>
            </tbody>
            <br>
        </table>
    </div>
    <div class="mt-3 text-center">
        <a href="{{ url_for('download_report', start_date=start_date.strftime('%Y-%m-%d'),end_date=end_date.strftime('%Y-%m-%d')) }}",target="_blank">
                <button>Download PDF</button>
        </a>
    </div>
    </div>
{% endblock %}